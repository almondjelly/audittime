{% extends 'base.html' %}

{% block body %}
<div class="container">

<!-- Start a new task -->
<h1>Start A New Task</h1>

<form id="form-stopwatch" method="post">
    <table id="task-new">
        <tr>
            <td>
                I'm currently <input type="text" id="input-new-task-name" placeholder="watching Better Call Saul" required autofocus name="task">
            </td>
            <td>
                <select required id="select-task-category">
                    <option value="Category" disabled selected>Category</option>
                    {% for category in categories %}
                        <option value="{{ category.name }}">{{ category.name }}</option>
                    {% endfor %}

                </select>
            </td>
            <td id="running-time">
                00:00:00
            </td>
            <td>
                <i id="start-button" class="material-icons">play_circle_filled</i>
                <i id="stop-button" class="material-icons">stop</i>
            </td>
        </tr>
    </table>

    <table id="manual-dates">
        <tr>
            <td class="td-manual-left"></td>
            <td class="td-manual">
                <input type="datetime-local" id="m-start" class="date-time-picker" required name="startTime" placeholder="Start">
            </td>
            <td class="td-manual">
                <input type="datetime-local" id="m-stop" class="date-time-picker" required name="stopTime" placeholder="Stop">
            </td>
            <td class="td-manual" id="manual-submit">
                Submit
            </td>
        </tr>
    </table>
</form>

<!-- Task Log -->
<table id="event-log">
    <thead>
    <tr>
        <th scope="col" class="th-task">Task</th>
        <th scope="col">Category</th>
        <th scope="col">Times</th>
        <!-- <th scope="col">End Time</th> -->
        <th scope="col">Duration</th>
        <th scope="col"></th>
        <th scope="col"></th>
    </tr>
    </thead> 

    <tbody>
    {% for event in events %}

    <tr class="tr-event-task">

        <!-- Event id, task id -->
        <form class="form-event-id">
            <input type="hidden" class="input-event-id" value="{{ event.event_id }}">
            <input type="hidden" class="input-task-id" value="{{ event.task.task_id }}">
        </form>

        <!-- Task name -->
        <td class="td-event-task">
            <input type="text" value="{{ event.task.name }}" class="td-input-event-task">
        </td>
        
        <!-- Category dropdown -->
        <td class="td-event-task-categories">
            <select class="td-input-event-task-categories">
                <option selected>{{ event.task.category.name }}</option>   
                {% for category in categories %}
                    <option>{{ category.name }}</option>
                {% endfor %}
            </select>
        </td>

        <td class="td-event-times">
            {{ event.start_time.strftime('%I:%M %p') }} - {{ event.stop_time.strftime('%I:%M %p') }}
        </td>

        <!-- Duration -->
        <td class="td-event-duration">
            {{ event.duration_str() }}
        </td>

        <!-- Save -->
        <td class="td-event-task-save">
        <span class="span-event-task-save">
            save
        </span>
        </td>

        <!-- Delete -->
        <td class="td-event-task-remove">
        <span class="span-event-task-remove">
            x
        </span>
        </td>

    </form>
    </tr>

    {% endfor %}
    </tbody>
</table>





</div>
{% endblock %}