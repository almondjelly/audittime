{% extends 'base.html' %}

{% block body %}

<h1>your goals</h1>

<!-- Add new goal -->
<form method="post" action="add_goal" id="form-goal">
    i want to <input type="text" name="goalName" placeholder="watch tv"> for 
    <select name="goalType">
        <option value="at_least">at least</option>
        <option value="at_most">at most</option>
    </select>
    <input type="number" name="hours" placeholder="4"> hours 
    <input type="number" name="minutes" placeholder="30"> minutes
    from <input type="datetime-local" name="startDate"> 
    to <input type="datetime-local" name="endDate">.
    <button type="submit" id="#goalSubmit">save</button>
</form>

<!-- Goal Log -->
<div id="goal-log">
<ul id="goal-log-ul" class="list-group">
    {% for goal in goals %}

    <li class="list-group-item">
        <form>
            <!-- Goal name -->
            <span class="goal-input">
                <span class="goal-{{ goal.goal_id }}">
                    <input type="text" value="{{ goal.name }}" name="{{ goal.goal_id }}" class="goal-input-field goal-name">
                </span>
            </span>

            <!-- Goal type -->
            <span class="goal-type">
                <span class="goal-{{ goal.goal_id }}">
                    

                    <!-- Dropdown for seleting goal type -->
                    <span class="goal-type-dropdown goal-{{ goal.goal_id }}">
                        <select>
                            {% if goal.goal_type == "at_least" %}

                                <option value="at_least" selected>at least</option>
                                <option value="at_most">at most</option>

                            {% else %}

                                <option value="at_least">at least</option>
                                <option value="at_most" selected>at most</option>

                            {% endif %}
                        </select>
                    </span>
                </span>
            </span>

            <!-- Duration -->
            <span class="goal-input duration">
                <span class="goal-{{ goal.goal_id }}">
                    <input class="goal-input-field duration days" type="text" value="{{ goal.duration.days }}" name="days-{{ goal.goal_id }}"> days

                    <input class="goal-input-field duration hours" type="text" value="{{ goal.duration.seconds // 3600 }}" name="hours-{{ goal.goal_id }}"> hours

                    <input class="goal-input-field duration minutes" type="text" value="{{ goal.duration.seconds // 60 % 60 }}" name="minutes-{{ goal.goal_id }}"> minutes
                </span>
            </span>

            <!-- Start and end dates -->
            <span>{{ goal.start_time }} to {{ goal.end_time }}</span>

            <!-- Categories -->
            <span>{% for category in goal.category %}{{ category.name }}, {% endfor %}</span>

            <!-- Save -->
            <span class="goal-edit-submit {{ goal.goal_id }}Submit" name="{{ goal.goal_id }}">
                <span>save</span>
            </span>
        </form>
    </li>
    {% endfor %}
</ul>
</div>



<!-- Add new category -->
<form method="post" action="add_category" id="form-category">
    <input type="text" name="categoryName" placeholder="new category">
    <select multiple name="categoryGoals">
        {% for goal in goals %}
            <option value="{{ goal.name }}">{{ goal.name }}</option>
        {% endfor %}
    </select> 
    
    <button type="submit" id="#categorySubmit">save</button>
</form>



<!-- Category Log -->
<div id="goal-log">
<table>
    <tr>
        <th>category</th>
        <th>goals</th>
    </tr>

    {% for category in categories %}
    <tr>
        <td>{{ category.name }}</td>
        <td>{% for goal in category.goal %}{{ goal.name }}, {% endfor %}</td>
    </tr>
    {% endfor %}

</table>
</div>


{% endblock %}